<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>德州扑克 - Texas Hold'em</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/cards.css">
    <link rel="stylesheet" href="css/animations.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 开始菜单 -->
    <div id="menu-screen" class="screen active">
        <div class="menu-container">
            <div class="game-logo">
                <h1>♠ 德州扑克 ♥</h1>
                <p class="subtitle">Texas Hold'em Poker</p>
            </div>
            
            <div class="menu-options">
                <div class="option-group">
                    <label>AI难度</label>
                    <div class="difficulty-selector">
                        <button class="diff-btn" data-difficulty="easy">简单</button>
                        <button class="diff-btn active" data-difficulty="medium">中等</button>
                        <button class="diff-btn" data-difficulty="hard">困难</button>
                    </div>
                </div>
                
                <div class="option-group">
                    <label>AI玩家数量</label>
                    <div class="player-count-selector">
                        <button class="count-btn" data-count="2">2</button>
                        <button class="count-btn" data-count="3">3</button>
                        <button class="count-btn active" data-count="4">4</button>
                        <button class="count-btn" data-count="5">5</button>
                    </div>
                </div>
                
                <div class="option-group">
                    <label>初始筹码</label>
                    <div class="chips-selector">
                        <button class="chips-btn" data-chips="1000">1,000</button>
                        <button class="chips-btn active" data-chips="5000">5,000</button>
                        <button class="chips-btn" data-chips="10000">10,000</button>
                    </div>
                </div>
                
                <div class="option-group">
                    <label>大小盲注</label>
                    <div class="blinds-selector">
                        <button class="blinds-btn active" data-blinds="10/20">10/20</button>
                        <button class="blinds-btn" data-blinds="25/50">25/50</button>
                        <button class="blinds-btn" data-blinds="50/100">50/100</button>
                    </div>
                </div>
            </div>
            
            <button id="start-game-btn" class="start-btn">
                <span>开始游戏</span>
            </button>
            
            <button id="rules-btn" class="rules-btn">
                <span>游戏规则</span>
            </button>
        </div>
    </div>
    
    <!-- 规则说明弹窗 -->
    <div id="rules-modal" class="modal">
        <div class="modal-content rules-content">
            <span class="close-btn">&times;</span>
            <h2>♠ 德州扑克规则 ♥</h2>
            
            <div class="rules-section">
                <h3>游戏流程</h3>
                <ol>
                    <li><strong>盲注阶段</strong>：小盲位和大盲位强制下注</li>
                    <li><strong>翻牌前（Pre-flop）</strong>：每位玩家获得2张底牌，进行第一轮下注</li>
                    <li><strong>翻牌（Flop）</strong>：发出3张公共牌，进行第二轮下注</li>
                    <li><strong>转牌（Turn）</strong>：发出第4张公共牌，进行第三轮下注</li>
                    <li><strong>河牌（River）</strong>：发出第5张公共牌，进行最后一轮下注</li>
                    <li><strong>摊牌（Showdown）</strong>：比较牌型大小，决定胜负</li>
                </ol>
            </div>
            
            <div class="rules-section">
                <h3>牌型大小（从大到小）</h3>
                <div class="hand-rankings">
                    <div class="hand-rank">
                        <span class="rank-name">皇家同花顺</span>
                        <span class="rank-desc">同花色的 A-K-Q-J-10</span>
                    </div>
                    <div class="hand-rank">
                        <span class="rank-name">同花顺</span>
                        <span class="rank-desc">同花色的连续五张牌</span>
                    </div>
                    <div class="hand-rank">
                        <span class="rank-name">四条</span>
                        <span class="rank-desc">四张相同点数的牌</span>
                    </div>
                    <div class="hand-rank">
                        <span class="rank-name">葫芦</span>
                        <span class="rank-desc">三条加一对</span>
                    </div>
                    <div class="hand-rank">
                        <span class="rank-name">同花</span>
                        <span class="rank-desc">五张相同花色的牌</span>
                    </div>
                    <div class="hand-rank">
                        <span class="rank-name">顺子</span>
                        <span class="rank-desc">五张连续点数的牌</span>
                    </div>
                    <div class="hand-rank">
                        <span class="rank-name">三条</span>
                        <span class="rank-desc">三张相同点数的牌</span>
                    </div>
                    <div class="hand-rank">
                        <span class="rank-name">两对</span>
                        <span class="rank-desc">两组不同的对子</span>
                    </div>
                    <div class="hand-rank">
                        <span class="rank-name">一对</span>
                        <span class="rank-desc">两张相同点数的牌</span>
                    </div>
                    <div class="hand-rank">
                        <span class="rank-name">高牌</span>
                        <span class="rank-desc">无法组成以上牌型</span>
                    </div>
                </div>
            </div>
            
            <div class="rules-section">
                <h3>玩家操作</h3>
                <ul>
                    <li><strong>弃牌（Fold）</strong>：放弃本轮游戏</li>
                    <li><strong>过牌（Check）</strong>：不下注，传递给下一位（仅当无人加注时可用）</li>
                    <li><strong>跟注（Call）</strong>：跟上当前最高下注</li>
                    <li><strong>加注（Raise）</strong>：提高下注金额</li>
                    <li><strong>全押（All-in）</strong>：押上所有筹码</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- 游戏主界面 -->
    <div id="game-screen" class="screen">
        <div class="game-container">
            <!-- 顶部信息栏 -->
            <div class="top-bar">
                <div class="game-info">
                    <span class="phase-indicator">翻牌前</span>
                    <span class="blinds-info">盲注: <span id="current-blinds">10/20</span></span>
                </div>
                <div class="pot-display">
                    <span class="pot-label">奖池</span>
                    <span class="pot-amount" id="pot-amount">0</span>
                </div>
                <div class="top-actions">
                    <button id="menu-btn" class="icon-btn" title="菜单">☰</button>
                </div>
            </div>
            
            <!-- 牌桌区域 -->
            <div class="table-area">
                <div class="poker-table">
                    <!-- 公共牌区域 -->
                    <div class="community-cards" id="community-cards">
                        <div class="card-placeholder"></div>
                        <div class="card-placeholder"></div>
                        <div class="card-placeholder"></div>
                        <div class="card-placeholder"></div>
                        <div class="card-placeholder"></div>
                    </div>
                    
                    <!-- 玩家位置 -->
                    <div class="players-container" id="players-container">
                        <!-- 玩家位置将由JS动态生成 -->
                    </div>
                </div>
            </div>
            
            <!-- 玩家操作区域 -->
            <div class="player-controls" id="player-controls">
                <div class="player-hand" id="player-hand">
                    <!-- 玩家手牌将由JS动态生成 -->
                </div>
                
                <div class="action-buttons">
                    <button id="fold-btn" class="action-btn fold-btn">
                        <span class="btn-text">弃牌</span>
                        <span class="btn-key">F</span>
                    </button>
                    <button id="check-call-btn" class="action-btn call-btn">
                        <span class="btn-text">跟注</span>
                        <span class="btn-amount"></span>
                        <span class="btn-key">C</span>
                    </button>
                    <button id="raise-btn" class="action-btn raise-btn">
                        <span class="btn-text">加注</span>
                        <span class="btn-amount"></span>
                        <span class="btn-key">R</span>
                    </button>
                    <button id="allin-btn" class="action-btn allin-btn">
                        <span class="btn-text">ALL IN</span>
                        <span class="allin-fire">🔥</span>
                        <span class="btn-key">A</span>
                    </button>
                </div>
                
                <div class="bet-slider-container" id="bet-slider-container">
                    <input type="range" id="bet-slider" class="bet-slider" min="0" max="1000" value="0">
                    <div class="bet-presets">
                        <button class="preset-btn" data-multiplier="0.5">1/2底池</button>
                        <button class="preset-btn" data-multiplier="0.75">3/4底池</button>
                        <button class="preset-btn" data-multiplier="1">1x底池</button>
                    </div>
                    <div class="bet-amount-display">
                        <span>加注至: </span>
                        <input type="number" id="bet-amount-input" class="bet-amount-input" value="0">
                    </div>
                </div>
                
                <div class="player-info-bar">
                    <div class="player-chips">
                        <span class="chips-icon">💰</span>
                        <span id="player-chips-display">5,000</span>
                    </div>
                    <div class="player-status" id="player-status">等待开始...</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 结果弹窗 -->
    <div id="result-modal" class="modal">
        <div class="modal-content result-content">
            <h2 id="result-title">本轮结果</h2>
            <div id="result-details" class="result-details">
                <!-- 结果详情将由JS动态生成 -->
            </div>
            <button id="next-round-btn" class="start-btn">下一轮</button>
        </div>
    </div>
    
    <!-- 游戏结束弹窗 -->
    <div id="gameover-modal" class="modal">
        <div class="modal-content gameover-content">
            <h2 id="gameover-title">游戏结束</h2>
            <div id="gameover-details" class="gameover-details">
                <!-- 游戏结束详情将由JS动态生成 -->
            </div>
            <div class="gameover-actions">
                <button id="restart-btn" class="start-btn">重新开始</button>
                <button id="back-menu-btn" class="rules-btn">返回菜单</button>
            </div>
        </div>
    </div>
    
    <!-- 游戏日志 -->
    <div id="game-log" class="game-log">
        <div class="log-header">
            <span>游戏日志</span>
            <button id="toggle-log" class="toggle-log-btn">−</button>
        </div>
        <div class="log-content" id="log-content">
            <!-- 日志内容将由JS动态添加 -->
        </div>
    </div>
    
    <!-- 概率计算器小窗口 -->
    <div id="odds-panel" class="odds-panel">
        <div class="panel-header">
            <span>📊 概率分析</span>
            <button id="toggle-odds" class="toggle-panel-btn">−</button>
        </div>
        <div class="panel-content" id="odds-content">
            <div class="odds-section">
                <div class="odds-title">🎯 当前胜率</div>
                <div class="win-probability">
                    <span class="prob-value" id="win-prob">--</span>
                    <span class="prob-label">%</span>
                </div>
                <div class="hand-category" id="hand-category">等待发牌...</div>
            </div>
            
            <div class="odds-section">
                <div class="odds-title">🃏 手牌强度</div>
                <div class="hand-strength-bar">
                    <div class="strength-fill" id="strength-fill"></div>
                </div>
                <div class="hand-key" id="hand-key">--</div>
            </div>
            
            <div class="odds-section draws-section" id="draws-section">
                <div class="odds-title">🎰 听牌分析</div>
                <div class="draws-list" id="draws-list">
                    <!-- 动态生成 -->
                </div>
            </div>
            
            <div class="odds-section">
                <div class="odds-title">📈 牌型概率</div>
                <div class="probabilities-list" id="probabilities-list">
                    <!-- 动态生成 -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- 攻略建议面板 -->
    <div id="strategy-panel" class="strategy-panel">
        <div class="panel-header">
            <span>💡 攻略建议</span>
            <button id="toggle-strategy" class="toggle-panel-btn">−</button>
        </div>
        <div class="panel-content" id="strategy-content">
            <div class="advice-action" id="advice-action">
                <span class="advice-icon">🤔</span>
                <span class="advice-text">等待游戏开始...</span>
            </div>
            <div class="advice-confidence" id="advice-confidence">
                <div class="confidence-bar">
                    <div class="confidence-fill" id="confidence-fill"></div>
                </div>
                <span class="confidence-text" id="confidence-text">置信度: --</span>
            </div>
            <div class="advice-reason" id="advice-reason">
                分析原因将在这里显示
            </div>
            <div class="advice-details" id="advice-details">
                <div class="details-title">💎 详细分析</div>
                <ul id="details-list">
                    <!-- 动态生成 -->
                </ul>
            </div>
        </div>
    </div>
    
    <!-- 数据统计面板 -->
    <div id="stats-panel" class="stats-panel">
        <div class="panel-header">
            <span>📋 数据面板</span>
            <button id="toggle-stats" class="toggle-panel-btn">−</button>
        </div>
        <div class="panel-content" id="stats-content">
            <div class="stats-grid">
                <div class="stat-item pot-stat">
                    <div class="stat-icon">💰</div>
                    <div class="stat-info">
                        <div class="stat-label">底池总额</div>
                        <div class="stat-value" id="stat-pot">0</div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">📥</div>
                    <div class="stat-info">
                        <div class="stat-label">跟注需要</div>
                        <div class="stat-value" id="stat-to-call">0</div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">📊</div>
                    <div class="stat-info">
                        <div class="stat-label">底池赔率</div>
                        <div class="stat-value" id="stat-pot-odds">--</div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">👥</div>
                    <div class="stat-info">
                        <div class="stat-label">活跃玩家</div>
                        <div class="stat-value" id="stat-active-players">--</div>
                    </div>
                </div>
            </div>
            <div class="players-chips-list">
                <div class="chips-title">💎 各玩家筹码</div>
                <div id="players-chips-list">
                    <!-- 动态生成 -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- 工具栏按钮 -->
    <div class="toolbar-buttons" id="toolbar-buttons">
        <button class="toolbar-btn" id="show-odds-btn" title="概率计算器">📊</button>
        <button class="toolbar-btn" id="show-strategy-btn" title="攻略建议">💡</button>
        <button class="toolbar-btn" id="show-stats-btn" title="数据面板">📋</button>
    </div>
    
    <!-- 音频元素 -->
    <audio id="sound-deal" preload="auto"></audio>
    <audio id="sound-chips" preload="auto"></audio>
    <audio id="sound-win" preload="auto"></audio>
    <audio id="sound-fold" preload="auto"></audio>
    
    <!-- JavaScript 模块 -->
    <script src="js/constants.js"></script>
    <script src="js/card.js"></script>
    <script src="js/deck.js"></script>
    <script src="js/handEvaluator.js"></script>
    <script src="js/player.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/oddsCalculator.js"></script>
    <script src="js/gameManager.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
